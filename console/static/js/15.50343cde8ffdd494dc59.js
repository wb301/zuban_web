webpackJsonp([15,22],{93:function(t,e,i){(function(t,s,a,n){"use strict";function l(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var c=i(25),o=l(c),_=i(219),r=l(_);e.default={components:{},data:function(){return{image:r.default,vip_level:"注册会员",vip_info:"无",vip_date:"",userInfo:t.userInfo(),is_vip:!!t.userInfo().vip,vipList:[],vipInfo:t.userInfo().vip}},mounted:function(){this.getVipInfo()},methods:{getVipInfo:function(){var e=this,i={token:this.userInfo.token},n={action:"c=Zb&m=SystemConfig&a=getVipPayList",param:i,success:function(i){e.vipInfo=i.info,e.vipConfig=i.config,e.userInfo.vip=e.vipInfo,t.setUserInfo(e.userInfo),e.vipList=[];for(var s=0;s<e.vipConfig.length;s++){if(e.vipInfo&&e.vipInfo.vip_type==e.vipConfig[s].level){var a=new Date(i.nowTime),n=new Date(e.vipInfo.end_time),l=n.getTime()-a.getTime(),c=Math.floor(l/864e5);e.vip_date="(还有"+c+"天到期)",e.is_vip=!0,e.vip_level=e.vipConfig[s].name,e.vip_info="可在"+e.vipInfo.start_time+"至"+e.vipInfo.end_time+"内免费查看出租人的联系方式"}e.vipList.push(e.vipConfig[s])}},fail:function(t){s.alert(t.msg)}};a.PostRequest(n)},payVip:function(t){var e=this,i={token:this.userInfo.token,vip:t.level,source:1,allPrice:t.price,paymentAry:(0,o.default)({pay_type:"WX"})},n={action:"c=Zb&m=Order&a=createMembersOrder",param:i,success:function(t){e.prePay(t.order_no,t.price)},fail:function(t){s.alert(t.msg)}};a.PostRequest(n)},prePay:function(e,i){var a=this;if(t.isWeixin()){var l={action:"c=Zb&m=Order&a=prePay",param:{out_trade_no:e,total_fee:100*parseFloat(i),openid:this.userInfo.wx_openid}},c=l.serverUrl||n.SERVER_URL;Vue.http.post(c+l.action,l.param,{emulateJSON:!0}).then(function(t){var e={appId:t.body.appid,timeStamp:t.body.timeStamp+"",nonceStr:t.body.nonceStr,package:t.body.package,signType:"MD5",paySign:t.body.sign};WeixinJSBridge.invoke("getBrandWCPayRequest",e,function(t){a.getVipInfo()})},function(t){s.alert("支付失败")})}}},destroyed:function(){}}}).call(e,i(8),i(4),i(7),i(14))},155:function(t,e,i){e=t.exports=i(1)(),e.push([t.id,".class_font_size_hd[data-v-4b29c828]{font-size:14px;color:#666}.class_height[data-v-4b29c828]{height:25px}.class_font_size_bd[data-v-4b29c828]{font-size:14px;color:#333}","",{version:3,sources:["/./src/page/vip/Index.vue"],names:[],mappings:"AACA,qCAAqC,eAAe,UAAa,CAChE,AACD,+BAA+B,WAAW,CACzC,AACD,qCAAqC,eAAe,UAAa,CAChE",file:"Index.vue",sourcesContent:["\n.class_font_size_hd[data-v-4b29c828]{font-size:14px;color:#666666\n}\n.class_height[data-v-4b29c828]{height:25px\n}\n.class_font_size_bd[data-v-4b29c828]{font-size:14px;color:#333333\n}"],sourceRoot:"webpack://"}])},183:function(t,e,i){var s=i(155);"string"==typeof s&&(s=[[t.id,s,""]]);i(2)(s,{});s.locals&&(t.exports=s.locals)},219:function(t,e,i){t.exports=i.p+"static/img/vip.772dbc5.png"},246:function(t,e,i){var s,a;i(183),s=i(93);var n=i(260);a=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(a=s=s.default),"function"==typeof a&&(a=a.options),a.render=n.render,a.staticRenderFns=n.staticRenderFns,a._scopeId="data-v-4b29c828",t.exports=s},260:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticStyle:{background:"#F5F5F5"}},[i("div",{staticClass:"content-manipulation"},[i("div",{staticClass:"weui-cells",staticStyle:{"margin-top":"0px"}},[i("div",{staticClass:"weui-cell class_height"},[t._m(0),t._v(" "),i("div",{staticClass:"weui-cell__bd"},[i("label",{staticClass:"weui-label class_font_size_bd",staticStyle:{float:"left"},attrs:{name:"vip_level"}},[t._v(t._s(this.vip_level))])]),t._v(" "),i("div",{staticClass:"weui-cell__ft"},[1==t.is_vip?i("label",{staticClass:"weui-label class_font_size_bd",staticStyle:{color:"#4990E2"}},[t._v(t._s(t.vip_date))]):t._e()])]),t._v(" "),i("div",{staticClass:"weui-cell class_height"},[t._m(1),t._v(" "),i("div",{staticClass:"weui-cell__bd"},[i("label",{staticClass:"weui-label class_font_size_bd",staticStyle:{width:"100%"}},[t._v(t._s(this.vip_info))])])]),t._v(" "),t._m(2)])]),t._v(" "),i("div",[i("div",[i("img",{staticStyle:{width:"100%"},attrs:{src:t.image}})])]),t._v(" "),t._m(3),t._v(" "),0==t.is_vip?i("div",{staticClass:"content-manipulation",staticStyle:{"margin-top":"8px"}},[i("div",{staticClass:"weui-cells",staticStyle:{"margin-top":"0px"}},[t._m(4),t._v(" "),t._l(t.vipList,function(e,s){return i("div",{staticClass:"weui-cell class_height"},[i("div",{staticClass:"weui-cell__hd"},[i("label",{staticClass:"weui-label class_font_size_bd"},[t._v(t._s(e.name))])]),t._v(" "),i("div",{staticClass:"weui-cell__bd"},[i("label",{staticClass:"weui-label class_font_size_bd"},[t._v(t._s(e.price)+"元")])]),t._v(" "),i("div",{staticClass:"weui-cell__ft",staticStyle:{"margin-top":"5px"}},[i("a",{staticClass:"weui-btn weui-btn_mini weui-btn_warn",staticStyle:{"background-color":"#A878E5","font-size":"12px"},on:{click:function(i){t.payVip(e)}}},[t._v("购买")])])])})],2)]):t._e()])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-cell__hd"},[i("label",{staticClass:"weui-label class_font_size_hd"},[t._v("当前等级")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-cell__hd"},[i("label",{staticClass:"weui-label class_font_size_hd"},[t._v("会员特权")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-cell class_height"},[i("div",{staticClass:"weui-cell__hd"},[i("label",{staticClass:"weui-label class_font_size_hd"},[t._v("会员特权说明")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content-manipulation"},[i("div",{staticClass:"weui-cells",staticStyle:{"margin-top":"-10px"}},[i("div",{staticClass:"weui-cell",staticStyle:{height:"30px"}},[i("div",{staticClass:"weui-cell__hd"},[i("label",{staticClass:"weui-label",staticStyle:{width:"100%","font-size":"12px",color:"#E35257"}},[t._v("说明:会员时间的计算从支付当天开始算起,到期后自动失效;支付成功10分钟内即可在服务详情页查看租人的联系方式。")])])])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-cell class_height"},[i("div",{staticClass:"weui-cell__hd"},[i("label",{staticClass:"weui-label class_font_size_hd"},[t._v("开通会员")])])])}]}}});
//# sourceMappingURL=15.50343cde8ffdd494dc59.js.map